---
structs:
  pio_sm:
    fields:
      - name: CLKDIV
        type: uint32_t
        description: |-
          (read-write) Clock divisor register for state machine N
                      Frequency = clock freq / (CLKDIV_INT + CLKDIV_FRAC / 256)
        fields:
          - name: FRAC
            description: |-
              Fractional part of clock divisor
            index: 8
            width: 8
            read: true
            write: true
          - name: INT
            description: |-
              Effective frequency is sysclk/(int + frac/256).
                              Value of 0 is interpreted as 65536. If INT is 0, FRAC must also be 0.
            index: 16
            width: 16
            read: true
            write: true
      - name: EXECCTRL
        type: uint32_t
        description: |-
          (read-write) Execution/behavioural settings for state machine N
        fields:
          - name: STATUS_N
            description: |-
              Comparison level for the MOV x, STATUS instruction
            index: 0
            width: 4
            read: true
            write: true
          - name: STATUS_SEL
            description: |-
              Comparison used for the MOV x, STATUS instruction.
            index: 4
            width: 1
            read: true
            write: true
          - name: WRAP_BOTTOM
            description: |-
              After reaching wrap_top, execution is wrapped to this address.
            index: 7
            width: 5
            read: true
            write: true
          - name: WRAP_TOP
            description: |-
              After reaching this address, execution is wrapped to wrap_bottom.
                              If the instruction is a jump, and the jump condition is true, the jump takes priority.
            index: 12
            width: 5
            read: true
            write: true
          - name: OUT_STICKY
            description: |-
              Continuously assert the most recent OUT/SET to the pins
            index: 17
            width: 1
            read: true
            write: true
          - name: INLINE_OUT_EN
            description: |-
              If 1, use a bit of OUT data as an auxiliary write enable
                              When used in conjunction with OUT_STICKY, writes with an enable of 0 will
                              deassert the latest pin write. This can create useful masking/override behaviour
                              due to the priority ordering of state machine pin writes (SM0 < SM1 < ...)
            index: 18
            width: 1
            read: true
            write: true
          - name: OUT_EN_SEL
            description: |-
              Which data bit to use for inline OUT enable
            index: 19
            width: 5
            read: true
            write: true
          - name: JMP_PIN
            description: |-
              The GPIO number to use as condition for JMP PIN. Unaffected by input mapping.
            index: 24
            width: 5
            read: true
            write: true
          - name: SIDE_PINDIR
            description: |-
              If 1, side-set data is asserted to pin directions, instead of pin values
            index: 29
            width: 1
            read: true
            write: true
          - name: SIDE_EN
            description: |-
              If 1, the MSB of the Delay/Side-set instruction field is used as side-set enable, rather than a side-set data bit. This allows instructions to perform side-set optionally, rather than on every instruction, but the maximum possible side-set width is reduced from 5 to 4. Note that the value of PINCTRL_SIDESET_COUNT is inclusive of this enable bit.
            index: 30
            width: 1
            read: true
            write: true
          - name: EXEC_STALLED
            description: |-
              If 1, an instruction written to SMx_INSTR is stalled, and latched by the state machine. Will clear to 0 once this instruction completes.
            index: 31
            width: 1
            read: true
            write: false
      - name: SHIFTCTRL
        type: uint32_t
        description: |-
          (read-write) Control behaviour of the input/output shift registers for state machine N
        fields:
          - name: AUTOPUSH
            description: |-
              Push automatically when the input shift register is filled, i.e. on an IN instruction which causes the input shift counter to reach or exceed PUSH_THRESH.
            index: 16
            width: 1
            read: true
            write: true
          - name: AUTOPULL
            description: |-
              Pull automatically when the output shift register is emptied, i.e. on or following an OUT instruction which causes the output shift counter to reach or exceed PULL_THRESH.
            index: 17
            width: 1
            read: true
            write: true
          - name: IN_SHIFTDIR
            description: |-
              1 = shift input shift register to right (data enters from left). 0 = to left.
            index: 18
            width: 1
            read: true
            write: true
          - name: OUT_SHIFTDIR
            description: |-
              1 = shift out of output shift register to right. 0 = to left.
            index: 19
            width: 1
            read: true
            write: true
          - name: PUSH_THRESH
            description: |-
              Number of bits shifted into ISR before autopush, or conditional push (PUSH IFFULL), will take place.
                              Write 0 for value of 32.
            index: 20
            width: 5
            read: true
            write: true
          - name: PULL_THRESH
            description: |-
              Number of bits shifted out of OSR before autopull, or conditional pull (PULL IFEMPTY), will take place.
                              Write 0 for value of 32.
            index: 25
            width: 5
            read: true
            write: true
          - name: FJOIN_TX
            description: |-
              When 1, TX FIFO steals the RX FIFO's storage, and becomes twice as deep.
                              RX FIFO is disabled as a result (always reads as both full and empty).
                              FIFOs are flushed when this bit is changed.
            index: 30
            width: 1
            read: true
            write: true
          - name: FJOIN_RX
            description: |-
              When 1, RX FIFO steals the TX FIFO's storage, and becomes twice as deep.
                              TX FIFO is disabled as a result (always reads as both full and empty).
                              FIFOs are flushed when this bit is changed.
            index: 31
            width: 1
            read: true
            write: true
      - name: ADDR
        type: uint32_t
        const: true
        description: |-
          (read-only) Current instruction address of state machine N
        fields:
          - name: ADDR
            index: 0
            width: 5
            read: true
            write: false
      - name: INSTR
        type: uint32_t
        description: |-
          (read-write) Read to see the instruction currently addressed by state machine N's program counter
                      Write to execute an instruction immediately (including jumps) and then resume execution.
        fields:
          - name: INSTR
            index: 0
            width: 16
            read: true
            write: true
      - name: PINCTRL
        type: uint32_t
        description: |-
          (read-write) State machine pin control
        fields:
          - name: OUT_BASE
            description: |-
              The lowest-numbered pin that will be affected by an OUT PINS, OUT PINDIRS or MOV PINS instruction. The data written to this pin will always be the least-significant bit of the OUT or MOV data.
            index: 0
            width: 5
            read: true
            write: true
          - name: SET_BASE
            description: |-
              The lowest-numbered pin that will be affected by a SET PINS or SET PINDIRS instruction. The data written to this pin is the least-significant bit of the SET data.
            index: 5
            width: 5
            read: true
            write: true
          - name: SIDESET_BASE
            description: |-
              The lowest-numbered pin that will be affected by a side-set operation. The MSBs of an instruction's side-set/delay field (up to 5, determined by SIDESET_COUNT) are used for side-set data, with the remaining LSBs used for delay. The least-significant bit of the side-set portion is the bit written to this pin, with more-significant bits written to higher-numbered pins.
            index: 10
            width: 5
            read: true
            write: true
          - name: IN_BASE
            description: |-
              The pin which is mapped to the least-significant bit of a state machine's IN data bus. Higher-numbered pins are mapped to consecutively more-significant data bits, with a modulo of 32 applied to pin number.
            index: 15
            width: 5
            read: true
            write: true
          - name: OUT_COUNT
            description: |-
              The number of pins asserted by an OUT PINS, OUT PINDIRS or MOV PINS instruction. In the range 0 to 32 inclusive.
            index: 20
            width: 6
            read: true
            write: true
          - name: SET_COUNT
            description: |-
              The number of pins asserted by a SET. In the range 0 to 5 inclusive.
            index: 26
            width: 3
            read: true
            write: true
          - name: SIDESET_COUNT
            description: |-
              The number of MSBs of the Delay/Side-set instruction field which are used for side-set. Inclusive of the enable bit, if present. Minimum of 0 (all delay bits, no side-set) and maximum of 5 (all side-set, no delay).
            index: 29
            width: 3
            read: true
            write: true
